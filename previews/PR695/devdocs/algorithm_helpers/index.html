<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internal Algorithm Helpers · NonlinearSolve.jl</title><meta name="title" content="Internal Algorithm Helpers · NonlinearSolve.jl"/><meta property="og:title" content="Internal Algorithm Helpers · NonlinearSolve.jl"/><meta property="twitter:title" content="Internal Algorithm Helpers · NonlinearSolve.jl"/><meta name="description" content="Documentation for NonlinearSolve.jl."/><meta property="og:description" content="Documentation for NonlinearSolve.jl."/><meta property="twitter:description" content="Documentation for NonlinearSolve.jl."/><meta property="og:url" content="https://docs.sciml.ai/NonlinearSolve/stable/devdocs/algorithm_helpers/"/><meta property="twitter:url" content="https://docs.sciml.ai/NonlinearSolve/stable/devdocs/algorithm_helpers/"/><link rel="canonical" href="https://docs.sciml.ai/NonlinearSolve/stable/devdocs/algorithm_helpers/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="NonlinearSolve.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">NonlinearSolve.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">NonlinearSolve.jl: High-Performance Unified Nonlinear Solvers</a></li><li><a class="tocitem" href="../../tutorials/getting_started/">Getting Started with Nonlinear Rootfinding in Julia</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/code_optimization/">Code Optimization for Small Nonlinear Systems in Julia</a></li><li><a class="tocitem" href="../../tutorials/large_systems/">Efficiently Solving Large Sparse Ill-Conditioned Nonlinear Systems in Julia</a></li><li><a class="tocitem" href="../../tutorials/modelingtoolkit/">Symbolic Nonlinear System Definition and Acceleration via ModelingToolkit</a></li><li><a class="tocitem" href="../../tutorials/small_compile/">Faster Startup and and Static Compilation</a></li><li><a class="tocitem" href="../../tutorials/iterator_interface/">Nonlinear Solver Iterator Interface</a></li><li><a class="tocitem" href="../../tutorials/optimizing_parameterized_ode/">Optimizing a Parameterized ODE</a></li><li><a class="tocitem" href="../../tutorials/nonlinear_solve_gpus/">Accelerated Rootfinding on GPUs</a></li><li><a class="tocitem" href="../../tutorials/snes_ex2/">PETSc SNES Example 2</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../../basics/nonlinear_problem/">Nonlinear Problems</a></li><li><a class="tocitem" href="../../basics/nonlinear_functions/">Nonlinear Functions and Jacobian Types</a></li><li><a class="tocitem" href="../../basics/solve/">Common Solver Options (Solve Keyword Arguments)</a></li><li><a class="tocitem" href="../../basics/nonlinear_solution/">Nonlinear Solutions</a></li><li><a class="tocitem" href="../../basics/autodiff/">Automatic Differentiation Backends</a></li><li><a class="tocitem" href="../../basics/termination_condition/">Termination Conditions</a></li><li><a class="tocitem" href="../../basics/diagnostics_api/">Diagnostics API</a></li><li><a class="tocitem" href="../../basics/sparsity_detection/">(Semi-)Automatic Sparsity Detection</a></li><li><a class="tocitem" href="../../basics/faq/">Frequently Asked Questions</a></li></ul></li><li><span class="tocitem">Solver Summaries and Recommendations</span><ul><li><a class="tocitem" href="../../solvers/nonlinear_system_solvers/">Nonlinear System Solvers</a></li><li><a class="tocitem" href="../../solvers/bracketing_solvers/">Interval Root-Finding Methods (Bracketing Solvers)</a></li><li><a class="tocitem" href="../../solvers/steady_state_solvers/">Steady State Solvers</a></li><li><a class="tocitem" href="../../solvers/nonlinear_least_squares_solvers/">Nonlinear Least Squares Solvers</a></li><li><a class="tocitem" href="../../solvers/fixed_point_solvers/">Fixed Point Solvers</a></li></ul></li><li><span class="tocitem">Native Functionalities</span><ul><li><a class="tocitem" href="../../native/solvers/">NonlinearSolve.jl Solvers</a></li><li><a class="tocitem" href="../../native/simplenonlinearsolve/">SimpleNonlinearSolve.jl</a></li><li><a class="tocitem" href="../../native/bracketingnonlinearsolve/">BracketingNonlinearSolve.jl</a></li><li><a class="tocitem" href="../../native/steadystatediffeq/">SteadyStateDiffEq.jl</a></li><li><a class="tocitem" href="../../native/descent/">Descent Subroutines</a></li><li><a class="tocitem" href="../../native/globalization/">Globalization Subroutines</a></li><li><a class="tocitem" href="../../native/diagnostics/">Diagnostics API</a></li></ul></li><li><span class="tocitem">Wrapped Solver APIs</span><ul><li><a class="tocitem" href="../../api/fastlevenbergmarquardt/">FastLevenbergMarquardt.jl</a></li><li><a class="tocitem" href="../../api/fixedpointacceleration/">FixedPointAcceleration.jl</a></li><li><a class="tocitem" href="../../api/leastsquaresoptim/">LeastSquaresOptim.jl</a></li><li><a class="tocitem" href="../../api/minpack/">MINPACK.jl</a></li><li><a class="tocitem" href="../../api/nlsolve/">NLsolve.jl</a></li><li><a class="tocitem" href="../../api/nlsolvers/">NLSolvers.jl</a></li><li><a class="tocitem" href="../../api/petsc/">PETSc.jl</a></li><li><a class="tocitem" href="../../api/scipy/">SciPy</a></li><li><a class="tocitem" href="../../api/siamfanlequations/">SIAMFANLEquations.jl</a></li><li><a class="tocitem" href="../../api/speedmapping/">SpeedMapping.jl</a></li><li><a class="tocitem" href="../../api/sundials/">Sundials.jl</a></li><li><a class="tocitem" href="../../api/homotopycontinuation/">HomotopyContinuation.jl</a></li></ul></li><li><span class="tocitem">Sub-Packages</span><ul><li><a class="tocitem" href="../../api/SciMLJacobianOperators/">SciMLJacobianOperators.jl</a></li></ul></li><li><span class="tocitem">Development Documentation</span><ul><li><a class="tocitem" href="../internal_interfaces/">Internal Abstract Types</a></li><li><a class="tocitem" href="../linear_solve/">Linear Solve</a></li><li><a class="tocitem" href="../jacobian/">Jacobian Wrappers</a></li><li><a class="tocitem" href="../operators/">Custom SciML Operators</a></li><li class="is-active"><a class="tocitem" href>Internal Algorithm Helpers</a><ul class="internal"><li><a class="tocitem" href="#Pseudo-Transient-Method"><span>Pseudo Transient Method</span></a></li><li><a class="tocitem" href="#Approximate-Jacobian-Methods"><span>Approximate Jacobian Methods</span></a></li><li><a class="tocitem" href="#Levenberg-Marquardt-Method"><span>Levenberg Marquardt Method</span></a></li><li><a class="tocitem" href="#Trust-Region-Method"><span>Trust Region Method</span></a></li><li><a class="tocitem" href="#Miscellaneous"><span>Miscellaneous</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../release_notes/">Release Notes</a></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Development Documentation</a></li><li class="is-active"><a href>Internal Algorithm Helpers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internal Algorithm Helpers</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/NonlinearSolve.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/NonlinearSolve.jl/blob/master/docs/src/devdocs/algorithm_helpers.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Internal-Algorithm-Helpers"><a class="docs-heading-anchor" href="#Internal-Algorithm-Helpers">Internal Algorithm Helpers</a><a id="Internal-Algorithm-Helpers-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-Algorithm-Helpers" title="Permalink"></a></h1><h2 id="Pseudo-Transient-Method"><a class="docs-heading-anchor" href="#Pseudo-Transient-Method">Pseudo Transient Method</a><a id="Pseudo-Transient-Method-1"></a><a class="docs-heading-anchor-permalink" href="#Pseudo-Transient-Method" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveFirstOrder.SwitchedEvolutionRelaxation" href="#NonlinearSolveFirstOrder.SwitchedEvolutionRelaxation"><code>NonlinearSolveFirstOrder.SwitchedEvolutionRelaxation</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SwitchedEvolutionRelaxation()</code></pre><p>Method for updating the damping parameter in the <a href="../../native/solvers/#NonlinearSolveFirstOrder.PseudoTransient"><code>PseudoTransient</code></a> method based on &quot;switched evolution relaxation&quot; [<a href="../../references/#kelley1998convergence">8</a>] SER method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveFirstOrder/src/pseudo_transient.jl#L39-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveFirstOrder.SwitchedEvolutionRelaxationCache" href="#NonlinearSolveFirstOrder.SwitchedEvolutionRelaxationCache"><code>NonlinearSolveFirstOrder.SwitchedEvolutionRelaxationCache</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SwitchedEvolutionRelaxationCache &lt;: AbstractDampingFunctionCache</code></pre><p>Cache for the <a href="#NonlinearSolveFirstOrder.SwitchedEvolutionRelaxation"><code>SwitchedEvolutionRelaxation</code></a> method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveFirstOrder/src/pseudo_transient.jl#L47-L51">source</a></section></article><h2 id="Approximate-Jacobian-Methods"><a class="docs-heading-anchor" href="#Approximate-Jacobian-Methods">Approximate Jacobian Methods</a><a id="Approximate-Jacobian-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Approximate-Jacobian-Methods" title="Permalink"></a></h2><h3 id="Initialization"><a class="docs-heading-anchor" href="#Initialization">Initialization</a><a id="Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.IdentityInitialization" href="#NonlinearSolveQuasiNewton.IdentityInitialization"><code>NonlinearSolveQuasiNewton.IdentityInitialization</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">IdentityInitialization(alpha, structure)</code></pre><p>Initialize the Jacobian to be an Identity Matrix scaled by <code>alpha</code> and maintain the structure as specified by <code>structure</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/initialization.jl#L67-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.TrueJacobianInitialization" href="#NonlinearSolveQuasiNewton.TrueJacobianInitialization"><code>NonlinearSolveQuasiNewton.TrueJacobianInitialization</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TrueJacobianInitialization(structure, autodiff)</code></pre><p>Initialize the Jacobian to be the true Jacobian and maintain the structure as specified by <code>structure</code>. <code>autodiff</code> is used to compute the true Jacobian and if not specified we make a selection automatically.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/initialization.jl#L107-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.BroydenLowRankInitialization" href="#NonlinearSolveQuasiNewton.BroydenLowRankInitialization"><code>NonlinearSolveQuasiNewton.BroydenLowRankInitialization</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">BroydenLowRankInitialization(alpha, threshold::Val)</code></pre><p>An initialization for <code>LimitedMemoryBroyden</code> that uses a low rank approximation of the Jacobian. The low rank updates to the Jacobian matrix corresponds to what SciPy calls <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.broyden2.html#scipy-optimize-broyden2">&quot;simple&quot;</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/initialization.jl#L139-L145">source</a></section></article><h3 id="Jacobian-Structure"><a class="docs-heading-anchor" href="#Jacobian-Structure">Jacobian Structure</a><a id="Jacobian-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Jacobian-Structure" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.FullStructure" href="#NonlinearSolveQuasiNewton.FullStructure"><code>NonlinearSolveQuasiNewton.FullStructure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FullStructure()</code></pre><p>Stores the full matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/structure.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.DiagonalStructure" href="#NonlinearSolveQuasiNewton.DiagonalStructure"><code>NonlinearSolveQuasiNewton.DiagonalStructure</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DiagonalStructure()</code></pre><p>Preserves only the Diagonal of the Matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/structure.jl#L1-L5">source</a></section></article><h3 id="Jacobian-Caches"><a class="docs-heading-anchor" href="#Jacobian-Caches">Jacobian Caches</a><a id="Jacobian-Caches-1"></a><a class="docs-heading-anchor-permalink" href="#Jacobian-Caches" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.InitializedApproximateJacobianCache" href="#NonlinearSolveQuasiNewton.InitializedApproximateJacobianCache"><code>NonlinearSolveQuasiNewton.InitializedApproximateJacobianCache</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">InitializedApproximateJacobianCache(
    J, structure, alg, cache, initialized::Bool, internalnorm
)</code></pre><p>A cache for Approximate Jacobian.</p><p><strong>Arguments</strong></p><ul><li><code>J</code>: The current Jacobian.</li><li><code>structure</code>: The structure of the Jacobian.</li><li><code>alg</code>: The initialization algorithm.</li><li><code>cache</code>: The Jacobian cache <a href="../jacobian/#NonlinearSolveBase.construct_jacobian_cache"><code>NonlinearSolveBase.construct_jacobian_cache</code></a> (if needed).</li><li><code>initialized</code>: A boolean indicating whether the Jacobian has been initialized.</li><li><code>internalnorm</code>: The norm to be used.</li></ul><p><strong>Interface</strong></p><pre><code class="language-julia hljs">(cache::InitializedApproximateJacobianCache)(::Nothing)</code></pre><p>Returns the current Jacobian <code>cache.J</code> with the proper <code>structure</code>.</p><pre><code class="language-julia hljs">InternalAPI.solve!(cache::InitializedApproximateJacobianCache, fu, u, ::Val{reinit})</code></pre><p>Solves for the Jacobian <code>cache.J</code> and returns it. If <code>reinit</code> is <code>true</code>, then the Jacobian is reinitialized.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/initialization.jl#L1-L32">source</a></section></article><h3 id="Reset-Methods"><a class="docs-heading-anchor" href="#Reset-Methods">Reset Methods</a><a id="Reset-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Reset-Methods" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.NoChangeInStateReset" href="#NonlinearSolveQuasiNewton.NoChangeInStateReset"><code>NonlinearSolveQuasiNewton.NoChangeInStateReset</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NoChangeInStateReset(;
    nsteps::Int = 3, reset_tolerance = nothing,
    check_du::Bool = true, check_dfu::Bool = true
)</code></pre><p>Recommends a reset if the state or the function value has not changed significantly in <code>nsteps</code> steps. This is used in <a href="../../native/solvers/#NonlinearSolveQuasiNewton.Broyden"><code>Broyden</code></a>.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>nsteps</code>: the number of steps to check for no change. Defaults to <code>3</code>.</li><li><code>reset_tolerance</code>: the tolerance for the reset check. Defaults to <code>eps(real(eltype(u)))^(3 // 4)</code>.</li><li><code>check_du</code>: whether to check the state. Defaults to <code>true</code>.</li><li><code>check_dfu</code>: whether to check the function value. Defaults to <code>true</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/reset_conditions.jl#L1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.IllConditionedJacobianReset" href="#NonlinearSolveQuasiNewton.IllConditionedJacobianReset"><code>NonlinearSolveQuasiNewton.IllConditionedJacobianReset</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">IllConditionedJacobianReset()</code></pre><p>Recommend resetting the Jacobian if the current jacobian is ill-conditioned. This is used in <a href="../../native/solvers/#NonlinearSolveQuasiNewton.Klement"><code>Klement</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/reset_conditions.jl#L89-L94">source</a></section></article><h3 id="Update-Rules"><a class="docs-heading-anchor" href="#Update-Rules">Update Rules</a><a id="Update-Rules-1"></a><a class="docs-heading-anchor-permalink" href="#Update-Rules" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.GoodBroydenUpdateRule" href="#NonlinearSolveQuasiNewton.GoodBroydenUpdateRule"><code>NonlinearSolveQuasiNewton.GoodBroydenUpdateRule</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GoodBroydenUpdateRule()</code></pre><p>Broyden Update Rule corresponding to &quot;good broyden&#39;s method&quot; [<a href="../../references/#broyden1965class">3</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/broyden.jl#L80-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.BadBroydenUpdateRule" href="#NonlinearSolveQuasiNewton.BadBroydenUpdateRule"><code>NonlinearSolveQuasiNewton.BadBroydenUpdateRule</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">BadBroydenUpdateRule()</code></pre><p>Broyden Update Rule corresponding to &quot;bad broyden&#39;s method&quot; [<a href="../../references/#broyden1965class">3</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/broyden.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveQuasiNewton.KlementUpdateRule" href="#NonlinearSolveQuasiNewton.KlementUpdateRule"><code>NonlinearSolveQuasiNewton.KlementUpdateRule</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">KlementUpdateRule()</code></pre><p>Update rule for <a href="../../native/solvers/#NonlinearSolveQuasiNewton.Klement"><code>Klement</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveQuasiNewton/src/klement.jl#L62-L66">source</a></section></article><h2 id="Levenberg-Marquardt-Method"><a class="docs-heading-anchor" href="#Levenberg-Marquardt-Method">Levenberg Marquardt Method</a><a id="Levenberg-Marquardt-Method-1"></a><a class="docs-heading-anchor-permalink" href="#Levenberg-Marquardt-Method" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveFirstOrder.LevenbergMarquardtTrustRegion" href="#NonlinearSolveFirstOrder.LevenbergMarquardtTrustRegion"><code>NonlinearSolveFirstOrder.LevenbergMarquardtTrustRegion</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LevenbergMarquardtTrustRegion(b_uphill)</code></pre><p>Trust Region method for <a href="../../native/solvers/#NonlinearSolveFirstOrder.LevenbergMarquardt"><code>LevenbergMarquardt</code></a>. This method is tightly coupled with the Levenberg-Marquardt method and works by directly updating the damping parameter instead of specifying a trust region radius.</p><p><strong>Arguments</strong></p><ul><li><code>b_uphill</code>: a factor that determines if a step is accepted or rejected. The standard choice in the Levenberg-Marquardt method is to accept all steps that decrease the cost and reject all steps that increase the cost. Although this is a natural and safe choice, it is often not the most efficient. Therefore downhill moves are always accepted, but uphill moves are only conditionally accepted. To decide whether an uphill move will be accepted at each iteration <span>$i$</span>, we compute <span>$\beta_i = \cos(v_{\text{new}}, v_{\text{old}})$</span>, which denotes the cosine angle between the proposed velocity <span>$v_{\text{new}}$</span> and the velocity of the last accepted step <span>$v_{\text{old}}$</span>. The idea is to accept uphill moves if the angle is small. To specify, uphill moves are accepted if <span>$(1-\beta_i)^{b_{\text{uphill}}} C_{i+1} \le C_i$</span>, where <span>$C_i$</span> is the cost at iteration <span>$i$</span>. Reasonable choices for <code>b_uphill</code> are <code>1.0</code> or <code>2.0</code>, with <code>b_uphill = 2.0</code> allowing higher uphill moves than <code>b_uphill = 1.0</code>. When <code>b_uphill = 0.0</code>, no uphill moves will be accepted. Defaults to <code>1.0</code>. See Section 4 of <a href="../../references/#transtrum2012improvements">Transtrum and Sethna [1]</a>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveFirstOrder/src/levenberg_marquardt.jl#L167-L191">source</a></section></article><h2 id="Trust-Region-Method"><a class="docs-heading-anchor" href="#Trust-Region-Method">Trust Region Method</a><a id="Trust-Region-Method-1"></a><a class="docs-heading-anchor-permalink" href="#Trust-Region-Method" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveFirstOrder.GenericTrustRegionScheme" href="#NonlinearSolveFirstOrder.GenericTrustRegionScheme"><code>NonlinearSolveFirstOrder.GenericTrustRegionScheme</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GenericTrustRegionScheme(;
    method = RadiusUpdateSchemes.Simple,
    max_trust_radius = nothing, initial_trust_radius = nothing,
    step_threshold = nothing, shrink_threshold = nothing, expand_threshold = nothing,
    shrink_factor = nothing, expand_factor = nothing
)</code></pre><p>Trust Region Method that updates and stores the current trust region radius in <code>trust_region</code>. For any of the keyword arguments, if the value is <code>nothing</code>, then we use the value used in the respective paper.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>radius_update_scheme</code>: the choice of radius update scheme to be used. Defaults to <code>RadiusUpdateSchemes.Simple</code> which follows the conventional approach. Other available schemes are documented in <a href="../../native/globalization/#NonlinearSolveFirstOrder.RadiusUpdateSchemes"><code>RadiusUpdateSchemes</code></a>,. These schemes have the trust region radius converging to zero that is seen to improve convergence. For more details, see [1].</li><li><code>max_trust_radius</code>: the maximal trust region radius. Defaults to <code>max(norm(fu), maximum(u) - minimum(u))</code>, except for <code>RadiusUpdateSchemes.NLsolve</code> where it defaults to <code>Inf</code>.</li><li><code>initial_trust_radius</code>: the initial trust region radius. Defaults to <code>max_trust_radius / 11</code>, except for <code>RadiusUpdateSchemes.NLsolve</code> where it defaults to <code>u0_norm &gt; 0 ? u0_norm : 1</code>.</li><li><code>step_threshold</code>: the threshold for taking a step. In every iteration, the threshold is compared with a value <code>r</code>, which is the actual reduction in the objective function divided by the predicted reduction. If <code>step_threshold &gt; r</code> the model is not a good approximation, and the step is rejected. Defaults to <code>nothing</code>.</li><li><code>shrink_threshold</code>: the threshold for shrinking the trust region radius. In every iteration, the threshold is compared with a value <code>r</code> which is the actual reduction in the objective function divided by the predicted reduction. If <code>shrink_threshold &gt; r</code> the trust region radius is shrunk by <code>shrink_factor</code>. Defaults to <code>nothing</code>.</li><li><code>expand_threshold</code>: the threshold for expanding the trust region radius. If a step is taken, i.e <code>step_threshold &lt; r</code> (with <code>r</code> defined in <code>shrink_threshold</code>), a check is also made to see if <code>expand_threshold &lt; r</code>. If that is true, the trust region radius is expanded by <code>expand_factor</code>. Defaults to <code>nothing</code>.</li><li><code>shrink_factor</code>: the factor to shrink the trust region radius with if <code>shrink_threshold &gt; r</code> (with <code>r</code> defined in <code>shrink_threshold</code>). Defaults to <code>0.25</code>.</li><li><code>expand_factor</code>: the factor to expand the trust region radius with if <code>expand_threshold &lt; r</code> (with <code>r</code> defined in <code>shrink_threshold</code>). Defaults to <code>2.0</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveFirstOrder/src/trust_region.jl#L149-L190">source</a></section></article><h2 id="Miscellaneous"><a class="docs-heading-anchor" href="#Miscellaneous">Miscellaneous</a><a id="Miscellaneous-1"></a><a class="docs-heading-anchor-permalink" href="#Miscellaneous" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveBase.callback_into_cache!" href="#NonlinearSolveBase.callback_into_cache!"><code>NonlinearSolveBase.callback_into_cache!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">callback_into_cache!(cache, internalcache, args...)</code></pre><p>Define custom operations on <code>internalcache</code> tightly coupled with the calling <code>cache</code>. <code>args...</code> contain the sequence of caches calling into <code>internalcache</code>.</p><p>This unfortunately makes code very tightly coupled and not modular. It is recommended to not use this functionality unless it can&#39;t be avoided (like in <code>LevenbergMarquardt</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveBase/src/abstract_types.jl#L547-L555">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NonlinearSolveBase.concrete_jac" href="#NonlinearSolveBase.concrete_jac"><code>NonlinearSolveBase.concrete_jac</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">concrete_jac(alg::AbstractNonlinearSolveAlgorithm)::Bool</code></pre><p>Whether the algorithm uses a concrete Jacobian.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/SciML/NonlinearSolve.jl/blob/58e18c172a78f9c008dc8271ab4ef66c338848a0/lib/NonlinearSolveBase/src/abstract_types.jl#L218-L222">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../operators/">« Custom SciML Operators</a><a class="docs-footer-nextpage" href="../../release_notes/">Release Notes »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 5 September 2025 20:19">Friday 5 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
